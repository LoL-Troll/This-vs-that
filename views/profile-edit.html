{% extends "layout.html" %}

{% block title %} This vs That | Edit Profile {% endblock %}

{% block pageStyle %}
<link rel="stylesheet" href="styles/profile.css">
{% endblock %}

{% block content %}
<!-- Source (Modified): https://www.bootdey.com/snippets/view/bs5-edit-profile-account-details -->
<main class="container">
    <div class="main-body">
        <div class="gutters-sm">

            <form action="\profile-edit" method="post" enctype="multipart/form-data">
                <!-- Profile Card -->
                <div class="mb-3">
                    <div class="card mb-3">
                        <div class="card-body text-center">
                            <img src={{ user.picture if (user.picture) else "./assets/profile-pic.png" }} alt="profile_pic" id="profile_pic" class="rounded-circle"
                                width="150">
                            <div class="mt-3">
                                <input type="file" name="image" id="upload-btn" hidden onchange="loadFile(event)" />
                                <label for="upload-btn" class="btn btn-primary">Upload Image</label>

                                <script>
                                    var loadFile = function (event) {
                                        var image = document.getElementById("profile_pic");
                                        image.src = URL.createObjectURL(event.target.files[0]);
                                    };
                                </script>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- Details Card -->
                <div class="">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h3 class="card-title">Profile Information</h3>
                            <hr>
                            <!-- Form Group (username)-->
                            <div class="mb-3">
                                <label class="small mb-1" for="inputUsername">Username</label>
                                <input name="username" class="form-control" id="inputUsername" type="text"
                                    placeholder="Enter your username" value="{{user.username}}">
                            </div>

                            <!-- Form Group (Full Name) -->
                            <div class="mb-3">
                                <label class="small mb-1" for="inputFullName">Full Name</label>
                                <input name="name" class="form-control" id="inputFullName" type="text"
                                    placeholder="Enter your full name" value="{{user.name}}">
                            </div>

                            <!-- Save changes button-->
                            <div class="text-center">
                                <button class="btn btn-primary" type="submit">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</main>
{% endblock %}